(function($){var default_setting={dispAreaIds:{lower:"",upper:""},dispTextList:[],updValIds:{lower:"",upper:""},updValList:[],initSelect:{lower:0,upper:1},callback:{func:null,params:"",asyc:false}};$.csSlidebar=function(container,options){var opt=$.extend({},$.fn.csSlidebar.defaults,options);var h=opt.updValList,K=opt.dispTextList,i=[opt.initSelect.lower,opt.initSelect.upper];var call,cparam,asyc=false;if(opt.callback==null){call=function(){}}else{if(opt.callback.func!=null&&typeof opt.callback.func==="function"){call=opt.callback.func}else{call=function(){}}cparam=opt.callback.params;asyc=opt.callback.asyc}var C=$("body"),u=$(window),G=$(container),E=G.parent(),z=E.find(".js-bar.js-lower"),B=E.find(".js-bar.js-upper"),n=E.find(".js-connector"),k=$("#"+opt.dispAreaIds.lower),s=$("#"+opt.dispAreaIds.upper),vl=$("#"+opt.updValIds.lower),vu=$("#"+opt.updValIds.upper),J=G.position(),p=false,A=false,L={lower:i[0],upper:i[1]},j={lower:0,upper:h.length-1},m={lower:j.lower,upper:j.upper},d={lower:j.lower,upper:j.upper};var o=G.width()-z.width(),g=o/(h.length-1);var F=J.left;var x=J.left+G.outerWidth()-B.outerWidth();var r=G.outerWidth();var w=function(O){var M=H(O)-E.offset().left;if(/ipad/i.test(navigator.userAgent)){M-=$(window).scrollLeft()}var N=M,P=B.position().left;p=true;if(M<J.left){N=J.left}else{if(M>P){N=P}}z.css({left:N});n.css({left:N,width:P-N,"background-position":-N+"px top"});v(false);f(false);O.stopPropagation()};var q=function(O){var M=H(O)-E.offset().left;if(/ipad/i.test(navigator.userAgent)){M-=$(window).scrollLeft()}var N=z.position().left,P=M;A=true;if(M<N){P=N}else{if(M>J.left+G.outerWidth()-B.outerWidth()){P=J.left+G.outerWidth()-B.outerWidth()}}B.css({left:P});n.css({left:N,width:P-N});v(false);f(false);O.stopPropagation()};var H=function(M){return u.scrollLeft()+(M.originalEvent.touches?M.originalEvent.touches[0].pageX:M.clientX)};var f=function(M){if(!d.lower||d.lower<j.lower){d.lower=j.lower}if(!d.upper||d.upper>j.upper){d.upper=j.upper}k.html(K[d.lower]);s.html(K[d.upper]);if(M){vl.val(d.lower==j.lower?"":h[d.lower]);vu.val(d.upper==j.upper?"":h[d.upper]);m.lower=d.lower;m.upper=d.upper;if(asyc){setTimeout(function(){call(cparam)},0)}else{call(cparam)}}};var v=function(N){var R=z.position().left,P=B.position().left;if(p){var Q=Math.max(0,Math.round(R/g)*g);if(Q+z.width()>=P){Q-=g}if(N){z.css({left:Q});n.css({left:Q,width:P-Q,"background-position":-Q+"px top"})}var M=Math.round(Q/g);if(!M||M<=j.lower){M=j.lower}d.lower=M;if(N){p=false}}else{if(A){var O=Math.min(Math.round(P/g)*g,o);if(O<=R+z.width()){O+=g}if(N){B.css({left:O});n.css({left:R,width:O-R})}var M=Math.round(O/g);if(!M||M>=j.upper){M=j.upper}d.upper=M;if(N){A=false}}}};var sc=function(S){var l=S.pageX-$(this).offset().left;p=Math.abs(z.position().left-l)<=Math.abs(B.position().left-l);A=!p;var slide=p?z:B;slide.css({left:l});v(true);f(true)};f(false);return container.each(function(){var M=J.top+(G.outerHeight()-z.outerHeight())/2;var Q=g*L.lower;var O=g*(j.upper-L.upper);var N=J.left+Q;var P=J.left+G.outerWidth()-B.outerWidth()-O;var R=G.outerWidth()-Q-O;z.css({top:M,left:N});B.css({top:M,left:P});n.css({top:J.top+(G.outerHeight()-n.outerHeight())/2,left:z.position().left,width:R});if(!L.lower||L.lower<j.lower){L.lower=j.lower}if(!L.upper||L.upper>j.upper){L.upper=j.upper}m.lower=d.lower=L.lower;m.lower=d.upper=L.upper;k.html(K[L.lower]);s.html(K[L.upper]);z.on("mousedown touchstart",function(S){p=true;C.on("mousemove touchmove",w);S.stopPropagation()});B.on("mousedown touchstart",function(S){A=true;C.on("mousemove touchmove",q);S.stopPropagation()});C.on("mouseup touchend",function(S){if(!p&&!A){return}v(true);f(true);$(this).off("mousemove touchmove",w);$(this).off("mousemove touchmove",q);E.off("click");setTimeout(function(){E.on("click",sc)},100)});E.on("click",sc);$(container).bind("reset",function(){var S=J.top+(G.outerHeight()-z.outerHeight())/2;var T=F;var U=x;var V=r;z.css({top:S,left:T});B.css({top:S,left:U});setTimeout(function(){n.css({top:J.top+(G.outerHeight()-n.outerHeight())/2,left:0,width:V,"background-position":-T+"px top"})},0);m.lower=d.lower=j.lower;m.upper=d.upper=j.upper;k.html(K[j.lower]);s.html(K[j.upper])})})};$.fn.csSlidebar=function(options){if(undefined==$(this).data("csSlidebar")){var plugin=new $.csSlidebar(this,options);$(this).data("csSlidebar",plugin)}return this};$.fn.csSlidebar.defaults=default_setting})(jQuery);
