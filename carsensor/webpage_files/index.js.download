!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).hacci=n()}(this,function(){"use strict";var r=function(t,n){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function e(t,n){function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}var i,t,u=function(){return(u=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},o=function(){function e(t,n){this.endpoint=t,this.timeout=n}return e.create=function(t,n){return new e(t,n)},e.prototype.call=function(t,n){if(XMLHttpRequest){var e=new XMLHttpRequest;e.open("POST",this.endpoint),e.timeout=this.timeout,e.setRequestHeader("Content-Type","application/json"),e.setRequestHeader("X-TOKEN",t),e.send(JSON.stringify(n))}},e}(),a=function(){function t(){}return t.prototype.apply=function(){return new Date},t}(),c=function(){function t(t){this.value=t.userAgent}return t.prototype.apply=function(){return this.value},t}(),h=function(){return(n()+n()).replace(/-/g,"")},n=function(){var e=+new Date;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return("x"===t?n:3&n|8).toString(16)})},l=function(){function t(){}return t.prototype.apply=function(){return h()},t}(),s=decodeURIComponent,p=encodeURIComponent,f=/; */,y=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,d=Math.floor;(t=i||(i={})).Lax="lax",t.Strict="strict";var v,w,g=document,x=function(t){var n,e=t.indexOf("=");if(e<0)return{};var r=t.substr(0,e).trim(),o=t.substr(e+1,t.length).trim(),i="'"===o[0]?o.slice(1,-1):o;return(n={})[r]=function(n){try{return s(n)}catch(t){return n}}(i),n},m=function(t,n){if(null!==n&&!y.test(n))throw new TypeError(t+" is invalid")},b=function(){return g.cookie.split(f).reduce(function(t,n){return u({},t,x(n))},{})},S=function(t,n){return g.cookie=function(t,n,e){void 0===e&&(e={}),m("argument name",t);var r=p(n);m("argument val",r);var o=t+"="+r;if(null!=e.maxAge&&(o+="; Max-Age="+d(e.maxAge)),e.domain&&(m("option domain",e.domain),o+="; Domain="+e.domain),e.path&&(m("option path",e.path),o+="; Path="+e.path),e.expires&&(o+="; Expires="+e.expires.toUTCString()),e.httpOnly&&(o+="; HttpOnly"),e.secure&&(o+="; Secure"),e.sameSite)if("boolean"==typeof e.sameSite&&e.sameSite)o+="; SameSite=Strict";else switch(e.sameSite){case i.Lax:o+="; SameSite=Lax";break;case i.Strict:o+="; SameSite=Strict"}return o}(n.name,t,{domain:n.domain,maxAge:n.maxAge,path:n.path}),b()[n.name]},O=function(t){try{return window.localStorage.getItem(t)}catch(t){return null}},j=function(){function f(){}return f.getAny=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.filter(function(t){return t&&5<=t.length})[0]},f.prototype.apply=function(t){var n,e,r=t.cookieName||"hacciId",o=t.cookieMaxAge||63072e3,i=t.cookieDomain||(n=location.hostname,(e=n.split(".").reverse()).length<=2?n:2<e[1].length?e[1]+"."+e[0]:2===e[0].length&&2===e[1].length?e[2]+"."+e[1]+"."+e[0]:n),u=t.cookiePath||"/",a=null!=t.disableCookie&&t.disableCookie,c=function(t){var n=function(t,n){try{return window.localStorage.setItem(t,n),O(t)}catch(t){return null}}(r,t);if(a)return n;var e=S(t,{domain:i,maxAge:o,name:r,path:u});return n||e},l=b()[r],s=O(r),p=f.getAny(l,s);return p?(c(p),p):c(h())},f}(),I=function(){function t(t){this.value=t.href}return t.prototype.apply=function(){return this.value},t}(),A=function(){function t(t){this.value=t.referrer}return t.prototype.apply=function(){return this.value},t}(),H="2.3.2",k=function(){function t(){}return t.prototype.apply=function(){return H},t}(),F=function(){function t(){}return t.prototype.apply=function(t){var n=t.sessionName||"hacciSession",e=function(t){try{return window.sessionStorage.getItem(t)}catch(t){return null}}(n);return(!e||e.length<5)&&(e=function(t,n){try{return window.sessionStorage.setItem(t,n),n}catch(t){return null}}(n,h())),e},t}(),_=function(){function t(t){this.value=t.title}return t.prototype.apply=function(){return this.value},t}(),C=function(){function t(){}return t.prototype.apply=function(){return h()},t}(),E=function(){function t(t){this.value=t.availHeight}return t.prototype.apply=function(){return this.value},t}(),R=function(){function t(t){this.value=t.availWidth}return t.prototype.apply=function(){return this.value},t}(),q=function(){function t(t){this.value=t.innerHeight}return t.prototype.apply=function(){return this.value},t}(),P=function(){function t(t){this.value=t.innerWidth}return t.prototype.apply=function(){return this.value},t}(),D=function(){function t(t){this.value=t.colorDepth}return t.prototype.apply=function(){return this.value},t}(),L=function(){function t(t){var n=S("true",{domain:t.hostname,maxAge:30,name:"hc-ck-enabled",path:"/"});this.value=null!=n}return t.prototype.apply=function(){return this.value},t}(),M=function(){function t(t){this.value=t.orientation&&t.orientation.angle}return t.prototype.apply=function(){return this.value},t}(),N=function(){function t(t){this.value=t.orientation&&t.orientation.type}return t.prototype.apply=function(){return this.value},t}(),T=function(){function t(t){this.value=t.height}return t.prototype.apply=function(){return this.value},t}(),G=function(){function t(t){this.value=t.width}return t.prototype.apply=function(){return this.value},t}(),W=function(){function t(t){this.value=t.languages&&t.languages[0]||t.language}return t.prototype.apply=function(){return this.value},t}(),U=function(){function t(t){this.value=t.characterSet}return t.prototype.apply=function(){return this.value},t}(),X=function(){function t(){this.value=JSON.stringify(b())}return t.prototype.apply=function(t){return t.sendCookies?this.value:null},t}(),J=function(){function t(){}return t.prototype.apply=function(o){var i=this;return void 0===o&&(o={}),Object.getOwnPropertyNames(this).reduce(function(t,n){var e,r=i[n].apply(o);return u({},t,((e={})[n]=r,e))},{})},t}(),K=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.hacciId=new j,t.sessionId=new F,t.viewId=new C,t.referrer=new A(document),t.sdkVersion=new k,t.charset=new U(document),t.language=new W(navigator),t}return e(t,n),t}(J),V=function(n){function t(){var t=null!==n&&n.apply(this,arguments)||this;return t.eventId=new l,t.location=new I(location),t.sentAt=new a,t.title=new _(document),t.userAgent=new c(navigator),t.availHeight=new E(screen),t.availWidth=new R(screen),t.browserHeight=new q(window),t.browserWidth=new P(window),t.colorDepth=new D(screen),t.cookieEnabled=new L(location),t.orientationAngle=new M(screen),t.orientationType=new N(screen),t.screenHeight=new T(screen),t.screenWidth=new G(screen),t.cookies=new X,t}return e(t,n),t}(J);(w=v||(v={})).Init="init",w.SetGlobal="setGlobal",w.Set="set",w.Send="send";for(var Z=function(){function n(t,n){void 0===t&&(t={}),this.globalFieldObject={},this.eventFieldObject={};var e=t.endpoint||"https://prd.t.hacci.live",r=t.timeout||2e3;this.options=t,this.executor=n(e,r),this.extFieldObject=(new K).apply(this.options)}return n.defaultExecutorInstance=function(t){return void 0===t&&(t={}),new n(t,o.create)},n.prototype.setGlobal=function(t){return this.globalFieldObject=u({},this.globalFieldObject,t),this.globalFieldObject},n.prototype.set=function(t,n){var e=this.eventFieldObject[t]||{};return this.eventFieldObject[t]=u({},e,n),this.eventFieldObject[t]},n.prototype.send=function(t,n){var e=this.eventFieldObject[t]||{},r=(new V).apply(this.options),o=u({web_ext:this.getExtObjectRequestFormat(this.extFieldObject,r)},this.globalFieldObject,e,n);return this.executor.call(t,o)},n.prototype.getExtObjectRequestFormat=function(t,n){var o=u({},t,n);return Object.keys(o).reduce(function(t,n){var e,r;return u({},t,((e={})[(r=n,r.replace(/([A-Z])/g,function(t){return"_"+t.charAt(0).toLowerCase()}))]=o[n],e))},{})},n}(),$=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];switch(t[0]){case v.Init:return 3<=t.length?window.HacciInstance=new Z(t[1],t[2]):window.HacciInstance=Z.defaultExecutorInstance(t[1]),window.HacciInstance;case v.SetGlobal:return window.HacciInstance.setGlobal(t[1]);case v.Set:return window.HacciInstance.set(t[1],t[2]);case v.Send:return window.HacciInstance.send(t[1],t[2])}},z=0,B=window.hacci.q||[];z<B.length;z++){var Q=B[z];$.apply(void 0,Q)}return $});
